<form (ngSubmit)="onSubmit()">
  <div formArrayName="items">
    <div *ngFor="let item of items.controls; let i=index" class="form-group">
      <div [formGroupName]="i">
        <label for="name{{i}}">Name</label>
        <input type="text" id="name{{i}}" name="name{{i}}" class="form-control" [(ngModel)]="item.value.name" required>
        <div *ngIf="item.get('name')?.invalid && (item.get('name')?.dirty || item.get('name')?.touched)" class="alert alert-danger">
          Name is required
        </div>

        <label for="quantity{{i}}">Quantity</label>
        <input type="number" id="quantity{{i}}" name="quantity{{i}}" class="form-control" [(ngModel)]="item.value.quantity" min="1">
        <div *ngIf="item.get('quantity')?.invalid && (item.get('quantity')?.dirty || item.get('quantity')?.touched)" class="alert alert-danger">
          Quantity must be at least 1
        </div>
      </div>
    </div>
  </div>

  <button type="submit" class="btn btn-primary">Submit</button>
</form>
